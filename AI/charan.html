<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ChocoCraft — Handcrafted Chocolates</title>
  <style>
    /* ---------- Reset & Base ---------- */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html,body { height: 100%; }
    body {
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: #fff8f3;
      color: #2b1b1b;
      line-height: 1.4;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    a { color: inherit; text-decoration: none; }

    /* ---------- Header ---------- */
    header {
      position: sticky; top: 0; z-index: 30;
      background: linear-gradient(90deg,#5b362f,#7b3f00);
      color: #fff; padding: 14px 20px;
      display:flex; align-items:center; justify-content:space-between;
    }
    .brand { display:flex; align-items:center; gap:12px; }
    .logo {
      width:44px;height:44px;border-radius:8px;
      background:linear-gradient(180deg,#3e231f,#6b3a2b);
      box-shadow:0 3px 8px rgba(0,0,0,0.25);
      display:flex;align-items:center;justify-content:center;font-weight:700;color:#ffdca8;
    }
    nav a { margin-left:16px; font-weight:600; color:#fff; }
    nav a:hover { opacity:0.9; text-decoration:underline; }

    /* ---------- Hero ---------- */
    .hero {
      padding: 68px 20px 36px;
      text-align:center;
      background: linear-gradient(180deg, rgba(123,63,0,0.08), transparent 40%);
    }
    .hero h1 { font-size: clamp(28px,4vw,44px); color:#4b2e2e; margin-bottom:12px; }
    .hero p { max-width:900px; margin: 0 auto 18px; color:#4a3a36; font-size:18px; }
    .cta { display:inline-block; padding:10px 18px; border-radius:999px; background:#4b2e2e; color:#fff; font-weight:700; box-shadow:0 6px 18px rgba(75,46,46,0.12); }

    /* ---------- Layout ---------- */
    main { max-width:1140px; margin:24px auto; padding:0 18px 80px; }
    .two-col { display:grid; grid-template-columns: 1fr 320px; gap:28px; align-items:start; }
    @media (max-width:900px){ .two-col{ grid-template-columns: 1fr; } }

    /* ---------- Products ---------- */
    .products { display:grid; gap:18px; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); }
    .card {
      background: #fff; border-radius:12px; padding:14px; box-shadow: 0 6px 18px rgba(43,27,27,0.06);
      display:flex; flex-direction:column; gap:10px;
    }
    .product-media { height:160px; border-radius:10px; overflow:hidden; display:flex; gap:8px; }
    .choco-img { flex:1; background-size:cover; background-position:center; border-radius:8px; }
    .empty-box { width:120px; background: #fff7ee; border:2px dashed rgba(75,46,46,0.18); border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:13px; color:#6b4a3f; position:relative; }
    .empty-box img { max-width:100%; max-height:100%; object-fit:contain; display:block; border-radius:6px; }
    .upload-input { position:absolute; inset:0; opacity:0; cursor:pointer; }

    .product-title { font-weight:700; color:#4b2e2e; }
    .product-desc { font-size:13px; color:#6a5047; }
    .product-row { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-top:auto; }
    .qty { width:72px; padding:8px 10px; border-radius:8px; border:1px solid #e0cfc6; }
    .btn { background:#4b2e2e; color:#fff; padding:8px 12px; border-radius:10px; border:none; cursor:pointer; font-weight:700; }
    .btn.secondary { background:#7b3f00; }
    .small { font-size:13px; padding:6px 10px; border-radius:8px; }

    /* ---------- Cart (right column) ---------- */
    .cart {
      position:sticky; top:92px; background:#fff; border-radius:12px; padding:14px; box-shadow:0 6px 20px rgba(43,27,27,0.07);
    }
    .cart h3 { margin-bottom:8px; color:#4b2e2e; }
    .cart-list { display:flex; flex-direction:column; gap:10px; max-height:420px; overflow:auto; padding-right:6px; }
    .cart-item { display:flex; gap:10px; align-items:center; }
    .cart-item .thumb { width:56px; height:56px; border-radius:8px; background:#fff7ee; display:flex; align-items:center; justify-content:center; overflow:hidden; }
    .cart-item .meta { flex:1; }
    .cart-item .meta b { display:block; color:#4b2e2e; }
    .total-row { display:flex; justify-content:space-between; align-items:center; margin-top:12px; font-weight:800; color:#4b2e2e; }

    /* ---------- Forms ---------- */
    .section { background:transparent; padding:10px 0 26px; }
    form.control { display:flex; flex-direction:column; gap:8px; max-width:680px; margin:8px auto 0; }
    label { font-weight:700; color:#4b2e2e; font-size:14px; }
    input[type="text"], input[type="email"], textarea, select {
      padding:10px 12px; border-radius:8px; border:1px solid #e6d7ce; font-size:15px; background:#fff;
    }
    textarea { min-height:110px; resize:vertical; }
    .actions { display:flex; gap:10px; margin-top:8px; flex-wrap:wrap; }

    /* ---------- Footer ---------- */
    footer { background:#2a1b1b; color:#ffdca8; padding:22px; text-align:center; margin-top:36px; }

    /* ---------- Modal (order summary) ---------- */
    .modal-backdrop { position:fixed; inset:0; background:rgba(17,11,9,0.45); display:flex; align-items:center; justify-content:center; z-index:60; }
    .modal { background:#fff; padding:18px; width:92%; max-width:760px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.25); }
    pre { background:#faf3ee; padding:12px; border-radius:8px; overflow:auto; max-height:320px; }

    /* small helpers */
    .muted { color:#6f4f43; font-size:13px; }
    .center { text-align:center; }

  </style>
</head>
<body>

  <header>
    <div class="brand">
      <div class="logo">CC</div>
      <div>
        <div style="font-weight:800; font-size:18px;">ChocoCraft</div>
        <div style="font-size:12px; color:#ffdca8; margin-top:2px;">Handcrafted Chocolates & Gifts</div>
      </div>
    </div>

    <nav>
      <a href="#about">About</a>
      <a href="#products">Products</a>
      <a href="#order">Order</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <section class="hero" aria-labelledby="hero-heading">
    <h1 id="hero-heading">Welcome to ChocoCraft</h1>
    <p>Delicious artisanal chocolates, gift boxes, and custom-printed box options. Upload your design into the <strong>empty box</strong> preview to personalize a gift.</p>
    <a class="cta" href="#products">Browse Chocolates</a>
  </section>

  <main>
    <div class="two-col">

      <!-- LEFT: Catalog & Forms -->
      <div>

        <!-- About -->
        <section id="about" class="section" aria-labelledby="about-h">
          <h2 id="about-h">About Us</h2>
          <p class="muted center" style="max-width:920px; margin:10px auto 0;">
            ChocoCraft crafts small-batch chocolates using ethically sourced cocoa, seasonal fillings, and lovingly wrapped gift boxes. We offer customization — upload an image or logo and preview it on an empty box before ordering.
          </p>
        </section>

        <!-- Products -->
        <section id="products" class="section" aria-labelledby="products-h" style="margin-top:6px;">
          <h2 id="products-h">Our Bestsellers</h2>
          <div class="products" aria-live="polite">

            <!-- Product 1 -->
            <article class="card" data-sku="MB-BOX" data-price="12.99" aria-labelledby="p1">
              <div class="product-media">
                <div class="choco-img" style="background-image:url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22180%22><rect width=%22300%22 height=%22180%22 fill=%22%23f7e9e3%22/><text x=%2215%22 y=%2290%22 font-size=%2220%22 fill=%22%236b4a3f%22 font-family=%22Arial%22>Milk Chocolate Box</text></svg>');"></div>
                <label class="empty-box" title="Click to upload artwork for box">
                  <span class="muted">Empty box<br>upload art</span>
                  <input class="upload-input" type="file" accept="image/*" aria-label="Upload artwork for Milk Chocolate Box">
                </label>
              </div>
              <div>
                <div class="product-title" id="p1">Milk Chocolate Box</div>
                <div class="product-desc">12 assorted milk chocolates — smooth, creamy, classic.</div>
                <div class="product-row">
                  <div>
                    <div class="muted">Price</div>
                    <div style="font-weight:800;">$12.99</div>
                  </div>
                  <div style="display:flex; align-items:center; gap:8px;">
                    <input class="qty" type="number" min="1" value="1" aria-label="Quantity for Milk Chocolate Box">
                    <button class="btn add-btn">Add</button>
                  </div>
                </div>
              </div>
            </article>

            <!-- Product 2 -->
            <article class="card" data-sku="DT-TRUF" data-price="18.50" aria-labelledby="p2">
              <div class="product-media">
                <div class="choco-img" style="background-image:url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22180%22><rect width=%22300%22 height=%22180%22 fill=%22%23efe7e4%22/><text x=%2215%22 y=%2290%22 font-size=%2220%22 fill=%22%236b4a3f%22 font-family=%22Arial%22>Dark Truffles</text></svg>');"></div>
                <label class="empty-box" title="Click to upload artwork for box">
                  <span class="muted">Empty box<br>upload art</span>
                  <input class="upload-input" type="file" accept="image/*" aria-label="Upload artwork for Dark Truffles Box">
                </label>
              </div>
              <div>
                <div class="product-title" id="p2">Dark Chocolate Truffles</div>
                <div class="product-desc">Rich 70% cocoa truffles with velvety ganache centers.</div>
                <div class="product-row">
                  <div>
                    <div class="muted">Price</div>
                    <div style="font-weight:800;">$18.50</div>
                  </div>
                  <div style="display:flex; align-items:center; gap:8px;">
                    <input class="qty" type="number" min="1" value="1" aria-label="Quantity for Dark Chocolate Truffles">
                    <button class="btn add-btn">Add</button>
                  </div>
                </div>
              </div>
            </article>

            <!-- Product 3 -->
            <article class="card" data-sku="AS-HAMP" data-price="29.99" aria-labelledby="p3">
              <div class="product-media">
                <div class="choco-img" style="background-image:url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22180%22><rect width=%22300%22 height=%22180%22 fill=%22%23fff3ea%22/><text x=%2215%22 y=%2290%22 font-size=%2220%22 fill=%22%236b4a3f%22 font-family=%22Arial%22>Assorted Hamper</text></svg>');"></div>
                <label class="empty-box" title="Click to upload artwork for box">
                  <span class="muted">Empty box<br>upload art</span>
                  <input class="upload-input" type="file" accept="image/*" aria-label="Upload artwork for Assorted Hamper">
                </label>
              </div>
              <div>
                <div class="product-title" id="p3">Assorted Gift Hamper</div>
                <div class="product-desc">A premium mix: truffles, pralines, chocolate bars, and a keepsake box.</div>
                <div class="product-row">
                  <div>
                    <div class="muted">Price</div>
                    <div style="font-weight:800;">$29.99</div>
                  </div>
                  <div style="display:flex; align-items:center; gap:8px;">
                    <input class="qty" type="number" min="1" value="1" aria-label="Quantity for Assorted Gift Hamper">
                    <button class="btn add-btn">Add</button>
                  </div>
                </div>
              </div>
            </article>

          </div>
        </section>

        <!-- Order / Customer details -->
        <section id="order" class="section" aria-labelledby="order-h">
          <h2 id="order-h">Order & Personalization</h2>
          <p class="muted center">After adding products to the cart, fill customer details below and place your order. Uploaded images are attached to the cart items and previewed in the box.</p>

          <form id="customer-form" class="control" onsubmit="return false;">
            <label for="cust-name">Full name</label>
            <input id="cust-name" type="text" placeholder="Jane Doe" required>

            <label for="cust-email">Email</label>
            <input id="cust-email" type="email" placeholder="you@example.com" required>

            <label for="cust-address">Delivery address</label>
            <textarea id="cust-address" placeholder="Street, city, postal code..." required></textarea>

            <div class="actions">
              <button id="place-order" class="btn small" type="button">Place Order</button>
              <button id="clear-cart" class="btn small secondary" type="button">Clear Cart</button>
            </div>
          </form>
        </section>

        <!-- Contact -->
        <section id="contact" class="section" aria-labelledby="contact-h">
          <h2 id="contact-h">Contact Us</h2>
          <p class="muted center">Questions about flavors, bulk orders, or corporate gifts? Send us a message.</p>

          <form id="contact-form" class="control" onsubmit="handleContact(event)">
            <label for="msg-name">Your name</label>
            <input id="msg-name" type="text" required>

            <label for="msg-email">Your email</label>
            <input id="msg-email" type="email" required>

            <label for="msg-text">Message</label>
            <textarea id="msg-text" required></textarea>

            <div class="actions">
              <button class="btn small" type="submit">Send Message</button>
            </div>
          </form>
        </section>

      </div>

      <!-- RIGHT: Cart -->
      <aside class="cart" aria-label="Shopping cart">
        <h3>Cart</h3>
        <div class="cart-list" id="cart-list">
          <div class="muted">No items yet — add chocolates to begin.</div>
        </div>

        <div style="margin-top:12px;">
          <div class="total-row">
            <div>Total</div>
            <div id="cart-total">$0.00</div>
          </div>
          <div style="margin-top:12px; display:flex; gap:8px;">
            <button id="checkout" class="btn" style="flex:1;" type="button">Review Order</button>
            <button id="download-cart" class="btn secondary small" style="flex:0 0 auto;">Download</button>
          </div>
        </div>
      </aside>

    </div>
  </main>

  <footer>
    <div style="font-weight:800;">ChocoCraft</div>
    <div style="font-size:13px; margin-top:6px;">© <span id="year"></span> ChocoCraft — handcrafted with care</div>
  </footer>

  <!-- Modal (order summary) -->
  <div id="order-modal" style="display:none;">
    <div class="modal-backdrop" role="dialog" aria-modal="true">
      <div class="modal" id="modal-content">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <h3>Order Summary</h3>
          <button id="close-modal" class="btn small">Close</button>
        </div>
        <div id="summary-area" style="margin-top:10px;">
          <!-- JS fills summary here -->
        </div>
        <div style="margin-top:12px; display:flex; gap:8px;">
          <button id="copy-order" class="btn">Copy to clipboard</button>
          <button id="download-order" class="btn secondary">Download JSON</button>
        </div>
      </div>
    </div>
  </div>

<script>
/* ---------- Basic cart & upload handling (client-side only) ---------- */
const cart = [];
document.getElementById('year').textContent = new Date().getFullYear();

function formatPrice(n){ return '$' + n.toFixed(2); }

function readFileAsDataURL(file){ return new Promise((res,rej)=> {
  const r = new FileReader();
  r.onload = e=>res(e.target.result);
  r.onerror = e=>rej(e);
  r.readAsDataURL(file);
});}

/* Initialize upload preview & add-to-cart buttons */
document.querySelectorAll('.card').forEach(card=>{
  const uploadInput = card.querySelector('.upload-input');
  const emptyBox = card.querySelector('.empty-box');
  const qtyInput = card.querySelector('.qty');
  const addBtn = card.querySelector('.add-btn');

  // when user uploads an image, show preview inside the empty box and attach to dataset
  uploadInput.addEventListener('change', async (e)=>{
    const file = e.target.files[0];
    if(!file) return;
    if(!file.type.startsWith('image/')) { alert('Please upload an image file.'); return; }
    try {
      const dataURL = await readFileAsDataURL(file);
      // show preview
      let img = emptyBox.querySelector('img');
      if(!img){ img = document.createElement('img'); emptyBox.innerHTML=''; emptyBox.appendChild(img); }
      img.src = dataURL;
      // store on the card element for later when adding to cart
      card._uploadedImage = { name: file.name, dataURL };
    } catch(err){
      console.error(err);
    }
  });

  // Add to cart: gather sku/title/price/qty/uploadedImage
  addBtn.addEventListener('click', ()=>{
    const sku = card.dataset.sku;
    const price = parseFloat(card.dataset.price);
    const title = card.querySelector('.product-title').textContent.trim();
    const qty = Math.max(1, Number(qtyInput.value) || 1);
    const uploaded = card._uploadedImage || null;

    // if the user uploaded an image, include it in the cart item so it's preserved
    const item = { sku, title, price, qty, uploaded };
    // If same sku with same uploaded image exists, increase qty; else push new
    const existing = cart.find(ci => ci.sku === sku && ((ci.uploaded && uploaded && ci.uploaded.dataURL === uploaded.dataURL) || (!ci.uploaded && !uploaded)));
    if(existing){
      existing.qty += qty;
    } else {
      cart.push(item);
    }
    renderCart();
    // brief highlight
    addBtn.textContent = 'Added ✓'; setTimeout(()=> addBtn.textContent='Add',800);
  });

});

function renderCart(){
  const list = document.getElementById('cart-list');
  list.innerHTML = '';
  if(cart.length === 0){
    list.innerHTML = '<div class="muted">No items yet — add chocolates to begin.</div>';
    document.getElementById('cart-total').textContent = formatPrice(0);
    return;
  }
  let total = 0;
  cart.forEach((it, idx)=>{
    total += it.price * it.qty;
    const el = document.createElement('div');
    el.className = 'cart-item';
    el.innerHTML = `
      <div class="thumb">${ it.uploaded ? '<img src="'+it.uploaded.dataURL+'" width="56" height="56" style="object-fit:cover">' : '<div style="padding:6px; color:#6b4a3f;">📦</div>' }</div>
      <div class="meta"><b>${it.title}</b><div class="muted">${it.qty} × ${formatPrice(it.price)}</div></div>
      <div style="display:flex; flex-direction:column; gap:6px; align-items:flex-end;">
        <button class="small" data-idx="${idx}" style="background:#eee;border-radius:8px;padding:6px 8px;border:none;cursor:pointer;">−</button>
        <button class="small" data-idx-add="${idx}" style="background:#eee;border-radius:8px;padding:6px 8px;border:none;cursor:pointer;">+</button>
      </div>
    `;
    list.appendChild(el);
  });
  document.getElementById('cart-total').textContent = formatPrice(total);

  // attach + / - handlers
  list.querySelectorAll('button[data-idx]').forEach(b=>{
    b.addEventListener('click', ()=>{
      const i = Number(b.dataset.idx);
      if(cart[i].qty > 1) cart[i].qty -= 1; else cart.splice(i,1);
      renderCart();
    });
  });
  list.querySelectorAll('button[data-idx-add]').forEach(b=>{
    b.addEventListener('click', ()=>{
      const i = Number(b.dataset.idxAdd);
      cart[i].qty += 1; renderCart();
    });
  });
}

/* Place order -> show modal summary */
const orderModal = document.getElementById('order-modal');
const modalContent = document.getElementById('modal-content');
document.getElementById('checkout').addEventListener('click', openSummary);
document.getElementById('place-order').addEventListener('click', openSummary);
document.getElementById('close-modal').addEventListener('click', ()=> orderModal.style.display='none');

function openSummary(){
  const name = document.getElementById('cust-name').value.trim();
  const email = document.getElementById('cust-email').value.trim();
  const addr = document.getElementById('cust-address').value.trim();
  if(cart.length === 0){ alert('Your cart is empty — add some chocolates first.'); return; }
  if(!name || !email || !addr){ alert('Please fill your name, email, and delivery address before placing the order.'); return; }

  const summaryArea = document.getElementById('summary-area');
  const order = {
    customer: { name, email, address: addr },
    items: cart.map(it => ({ sku: it.sku, title: it.title, price: it.price, qty: it.qty, uploadedName: it.uploaded ? it.uploaded.name : null })),
    total: cart.reduce((s,i)=> s + i.price * i.qty, 0),
    date: new Date().toISOString()
  };

  // Render human friendly summary + small previews
  let html = `<div style="display:flex; gap:12px; align-items:center;"><div style="flex:1;"><b>${name}</b><div class="muted">${email}</div><div class="muted" style="margin-top:6px">${addr.replace(/\n/g,' • ')}</div></div><div style="text-align:right"><b>${formatPrice(order.total)}</b><div class="muted">Order total</div></div></div><hr style="margin:12px 0;border:none;border-top:1px solid #f0e3db;">`;
  order.items.forEach((it, i)=>{
    html += `<div style="display:flex; gap:12px; align-items:center; margin-bottom:10px;">
      <div style="width:84px; height:84px; border-radius:8px; background:#fff7ee; overflow:hidden; display:flex; align-items:center; justify-content:center">
        ${ cart[i].uploaded ? `<img src="${cart[i].uploaded.dataURL}" style="max-width:100%; max-height:100%; object-fit:cover">` : '<div class="muted">No art</div>' }
      </div>
      <div style="flex:1"><b>${it.title}</b><div class="muted">${it.qty} × ${formatPrice(it.price)}</div></div>
      <div style="text-align:right"><b>${formatPrice(it.price * it.qty)}</b></div>
    </div>`;
  });

  html += `<hr style="margin:8px 0;border:none;border-top:1px solid #f0e3db;"><div style="margin-top:8px;"><button id="confirm-order" class="btn">Confirm & Save</button> <button id="edit-order" class="btn small secondary">Edit</button></div>`;
  summaryArea.innerHTML = html;

  // show modal
  orderModal.style.display = 'block';

  // attach confirm handler
  document.getElementById('confirm-order').addEventListener('click', ()=>{
    // For now: save order as downloadable JSON & copy to clipboard. (No backend here.)
    const blob = new Blob([JSON.stringify(order, null, 2)], { type:'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = `chococraft-order-${Date.now()}.json`; document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
    alert('Order JSON downloaded. Share this with ChocoCraft or integrate a backend to submit orders automatically.');
    orderModal.style.display='none';
    // Optionally clear cart
    // cart.length = 0; renderCart();
  });

  document.getElementById('edit-order').addEventListener('click', ()=> orderModal.style.display='none');
}

/* Copy & Download order button (summary modal level) */
document.getElementById('copy-order').addEventListener('click', async ()=>{
  if(cart.length === 0) return alert('Cart empty.');
  const name = document.getElementById('cust-name').value.trim();
  const email = document.getElementById('cust-email').value.trim();
  const addr = document.getElementById('cust-address').value.trim();
  const order = { customer: { name, email, address: addr }, items: cart, total: cart.reduce((s,i)=>s+i.price*i.qty,0), date: new Date().toISOString() };
  try {
    await navigator.clipboard.writeText(JSON.stringify(order, null, 2));
    alert('Order JSON copied to clipboard — you can paste it into email or send to us.');
  } catch(e){ alert('Unable to copy automatically. Please use the Download button instead.'); }
});

document.getElementById('download-order').addEventListener('click', ()=>{
  if(cart.length === 0) return alert('Cart empty.');
  const name = document.getElementById('cust-name').value.trim();
  const email = document.getElementById('cust-email').value.trim();
  const addr = document.getElementById('cust-address').value.trim();
  const order = { customer: { name, email, address: addr }, items: cart, total: cart.reduce((s,i)=>s+i.price*i.qty,0), date: new Date().toISOString() };
  const blob = new Blob([JSON.stringify(order, null, 2)], { type:'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = `chococraft-order-${Date.now()}.json`; document.body.appendChild(a); a.click(); a.remove();
  URL.revokeObjectURL(url);
});

/* Download cart button in sidebar (quick save) */
document.getElementById('download-cart').addEventListener('click', ()=>{
  if(cart.length === 0) return alert('Cart empty.');
  const blob = new Blob([JSON.stringify({ items:cart, total: cart.reduce((s,i)=>s+i.price*i.qty,0) }, null, 2)], { type:'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = `chococraft-cart-${Date.now()}.json`; document.body.appendChild(a); a.click(); a.remove();
  URL.revokeObjectURL(url);
});

/* Clear cart */
document.getElementById('clear-cart').addEventListener('click', ()=>{
  if(!confirm('Clear the cart?')) return;
  cart.length = 0; renderCart();
});

/* Contact form handler (client-side demo) */
function handleContact(e){
  e.preventDefault();
  const name = document.getElementById('msg-name').value.trim();
  const email = document.getElementById('msg-email').value.trim();
  const text = document.getElementById('msg-text').value.trim();
  if(!name || !email || !text) return alert('Please fill all fields.');
  // Demo: copy message to clipboard and show a friendly note.
  const msg = { name, email, text, date: new Date().toISOString() };
  navigator.clipboard?.writeText(JSON.stringify(msg, null, 2)).then(()=>{
    alert('Message copied to clipboard. (Demo) — In a real site we would send this to your email or backend.');
    document.getElementById('contact-form').reset();
  }).catch(()=> alert('Please copy your message manually:\n\n' + JSON.stringify(msg, null, 2)));
}

/* basic accessibility: close modal on backdrop click */
document.getElementById('order-modal').addEventListener('click', (e)=>{
  if(e.target.classList.contains('modal-backdrop')) orderModal.style.display='none';
});

/* initial render */
renderCart();
</script>
</body>
</html>
